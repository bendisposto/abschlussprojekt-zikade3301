<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org"
      th:replace="~{mopslayout :: html(name='Modulhandbuch', headcontent=~{:: headcontent}, navigation=~{:: navigation}, bodycontent=~{:: bodycontent})}">
<head>
    <meta charset="utf-8">
    <title>Modulerstellung</title>
    <th:block th:fragment="headcontent">
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
                integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
                crossorigin="anonymous">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
                integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
                crossorigin="anonymous">
        </script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
                integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
                crossorigin="anonymous">
        </script>
        <script>
            // Diese Funktion öffnet das Modal, das das Formular beinhaltet
            // Sie wird beim Laden dieser View automatisch aufgerufen.
            $(document).ready(function openWhenLoadingPage(){
                    $('#formularModal').modal('show');
            });
        </script>
    </th:block>
</head>
<body th:onload="'javascript: openWhenLoadingPage()'">
<header>
    <nav class="navigation navigation-secondary" is="mops-navigation" th:fragment="navigation">
        <ul>
            <li class="active">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle"
                            style="width: 100%;
                            border-radius: 0;
                            text-align: left;
                            background: transparent;
                            color: dimgray;
                            border: none"
                            type="button"
                            id="dropdownMenuButton"
                            data-toggle="dropdown"
                            aria-haspopup="true"
                            aria-expanded="false">
                        Semesterauswahl
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a style="background: white; color: dimgray" class="dropdown-item" href="#">WS/SS</a>
                        <a style="background: white; color: dimgray" class="dropdown-item" href="#">WS</a>
                        <a style="background: white; color: dimgray" class="dropdown-item" href="#">SS</a>
                    </div>
                </div>
            </li>
            <li>
                <a href="/module/">Übersicht</a>
            </li>
            <li th:if="${account}">
                <div th:each="role: ${account.getRoles()}">
                    <div th:switch="${role}">
                        <a th:case="'orga'" href="/module/modulbeauftragter">Module bearbeiten</a>
                        <div th:case="'sekretariat'" href="/module/modulbeauftragter">
                            <a href="/module/modulbeauftragter">Module bearbeiten</a>
                            <a href="/module/administrator">Anträge</a>
                        </div>
                    </div>
                </div>
            </li>
        </ul>

    </nav>
</header>
<main th:fragment="bodycontent">

    <!-- Modal -->
    <form action="#" th:action="@{/module/modulerstellung}" method="post">
        <div class="modal"
             id="formularModal"
             tabindex="-1"
             role="dialog"
             aria-labelledby="exampleModalCenterTitle"
             aria-hidden="false"
             style="display: inherit;
             padding-bottom: 3rem;
             pointer-events: none;">
            <div class="modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable"
                 role="document"
                 style="height: inherit;">
                <div class="modal-content" style="height: 100%;">

                    <div class="modal-header">
                        <h3 class="modal-title" id="exampleModalCenterTitle">Modulerstellung beantragen</h3>
                    </div>
                    <div class="modal-body" style="padding: 0">
                        <div style="padding: 1rem; display: inline;">

                            <!-- AUSWAHL DES TITELS -->
                            <div class="mt-3 mb-3" style="display: flex;">
                                <label for="titelDeutsch" class="col-1">Titel</label>
                                <input type="text"
                                       style="border: none;
                                       border-bottom: 1px solid dimgray;
                                       border-radius: inherit;
                                       color: lightslategrey"
                                       name="titelDeutsch"
                                       class="form-control col-5"
                                       id="titelDeutsch"
                                       placeholder="Titel des Moduls" required>
                                <div class="ml-1 col-1">&nbsp;</div>
                                <input type="text"
                                       style="border: none;
                                       border-bottom: 1px solid dimgray;
                                       border-radius: inherit;
                                       color: lightslategrey"
                                       name="titelEnglisch"
                                       class="form-control col-5"
                                       id="titelEnglisch"
                                       placeholder="Englischer Titel des Moduls" required>
                            </div>
                            <br>

                            <!-- AUSWAHL Studiengang -->
                            <div class="mt-3 mb-3" style="display: flex;">
                                <label for="studiengang" class="col-2">Studiengang</label>
                                <input type="text"
                                       style="color: lightslategrey;
                                       border: none;
                                       border-bottom: 1px solid dimgray;
                                       border-radius: inherit;"
                                       name="studiengang"
                                       class="form-control col-4"
                                       id="studiengang"
                                       placeholder="Studiengang" required>
                            </div>
                            <br>

<!--                            TODO hier mehrere-->
                            <div class="mt-3 mb-3 col-12">
                                <label for="modulbeauftragte">Modulbeauftragte</label>
                                <input type="text"
                                       style="float: right; border: none; border-bottom: 1px solid dimgray; border-radius: inherit;"
                                       name="modulbeauftragte"
                                       class="form-control col-md-8 col-sm-8"
                                       id="modulbeauftragte"
                                       placeholder="Modulbeauftragte der Veranstaltung" required>
                            </div>



                            <!-- AUSWAHL LEISTUNGSPUNKTE UND MODULKATEGORIE -->
                            <div style="display: inline-flex;">
                                <div class="mt-3 mb-3 col-4" style="float: left">
                                    <label for="gesamtLeistungspunkte" class="col-md-8 col-sm-8 pl-0">Leistungspunkte</label>
                                    <input type="number"
                                           style="float: right;
                                           color: lightslategrey"
                                           name="gesamtLeistungspunkte"
                                           class="form-control col-md-4 col-sm-4"
                                           id="gesamtLeistungspunkte"
                                           placeholder="CP" required>
                                </div>
                                <div class="mt-3 mb-3 col-8" style="float: left">
                                    <label for="modulkategorie">Modulkategorie</label>
                                    <select name="modulkategorie"
                                            style="float: right"
                                            class="form-control col-md-8 col-sm-8"
                                            id="modulkategorie" required>
                                        <option selected hidden value="">Modulkategorie Wählen</option>
                                        <option value="PFLICHT_INFO">Informatik Pflichtmodul</option>
                                        <option value="PFLICHT_MATHE">Mathematik Pflichtmodul</option>
                                        <option value="NEBENFACH">Nebenfach</option>
                                        <option value="PRAXIS">Praxis- und Berufsorientierung</option>
                                        <option value="WAHLPFLICHT_BA">Wahlpflichtbereich (B.Sc.)</option>
                                        <option value="WAHLPFLICHT_MA">Wahlpflichtbereich (M.Sc.)</option>
                                        <option value="BACHELORARBEIT">Bachelorarbeit</option>
                                        <option value="PROJEKTARBEIT">Projektarbeit</option>
                                        <option value="MASTERARBEIT">Masterarbeit</option>
                                        <option value="SONSTIGE">Sonstige</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <br>



                        <!--  TODO: Alle Formularfelder hinzufügen -->
                        <!--  TODO: Alle Formularfelder mit Thymeleaf auslesen -->


                        <!-- VERANSTALTUNGEN WERDEN IN EINER SCHLEIFE AUFGELISTET -->
                        <div>
                            <div class="accordion mt-3" id="accordion">
                                <div class="card"
                                     style="border: none;
                                     border-radius: unset;
                                     background-color: white"
                                     th:each="i : ${#numbers.sequence(1, veranstaltungsanzahl)}">
                                    <div class="card-header" th:id="'veranstaltung'+ ${i}+'heading'" style="background-color: white;">
                                        <h2 class="mb-0">
                                            <a data-toggle="collapse"
                                               th:href="'#veranstaltung'+${i}"
                                               aria-expanded="true"
                                               th:aria-controls="'veranstaltung'+ ${i}">
                                                <svg style="color: lightslategrey;" class="bi bi-caret-right-fill" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M12.14 8.753l-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 011.659-.753l5.48 4.796a1 1 0 010 1.506z"/>
                                                </svg>
                                                <span style="font-size: medium; font-weight: bold; color: lightslategrey; text-decoration: none"
                                                      th:text="${i}+'. Veranstaltung'">
                                                    Veranstaltungsnummer
                                                </span>
                                            </a>
                                        </h2>
                                    </div>

                                    <!-- FORMULAR FÜR EINE VERANSTALTUNG -->
                                    <div th:id="'veranstaltung'+ ${i}"
                                         class="collapse"
                                         th:aria-labelledby="'veranstaltung'+ ${i}+'heading'"
                                         data-parent="#accordion">
                                        <div class="card-body" style="background-color: lightslategrey; color: white;">

                                            <div class="mt-3 mb-3" style="display: flex;">
                                                <div class="input-group mb-3 col-8 pl-0" style="display: block">
                                                    <input type="text"
                                                           th:name="'veranstaltung' + ${i} + '_titel'"
                                                           class="form-control"
                                                           style="background: transparent;
                                                           color: white;
                                                           font-size: larger;
                                                           border: none;
                                                           border-bottom: 1px solid white;
                                                           border-radius: unset;"
                                                           aria-label="Veranstaltungstitel"
                                                           aria-describedby="basic-addon1">
                                                    <div style="color: white; font-size: small;">Veranstaltungstitel</div>
                                                </div>

                                                <div class="input-group mb-3 col-3" style="display: block">
                                                    <input type="number"
                                                           th:name="'veranstaltung' + ${i} + '_leistungspunkte'"
                                                           style="background: transparent;
                                                           border: none;
                                                           border-bottom: 1px solid white;
                                                           border-radius: unset;
                                                           color: white;"
                                                           class="form-control"
                                                           aria-describedby="basic-addon2">
                                                    <div style="color: white; font-size: small;">Leistungspunkte</div>
                                                </div>
                                            </div>

                                            <div class="input-group col-8 pl-0">
                                                <div class="input-group mb-3 col-8 pl-0" style="display: block">
                                                    <input type="text"
                                                           th:name="'veranstaltung' + ${i} + '_haeufigkeit'"
                                                           class="form-control"
                                                           style="background: transparent;
                                                           color: white;
                                                           font-size: larger;
                                                           border: none;
                                                           border-bottom: 1px solid white;
                                                           border-radius: unset;"
                                                           aria-label="haeufigkeit"
                                                           aria-describedby="basic-addon1">
                                                    <div style="color: white; font-size: small;">Häufigkeit</div>
                                                </div>
                                                <div class="input-group mb-3 col-4 pl-0" style="display: block">
                                                    <input type="text"
                                                           th:name="'veranstaltung' + ${i} + '_sprache'"
                                                           class="form-control"
                                                           style="background: transparent;
                                                           color: white;
                                                           font-size: larger;
                                                           border: none;
                                                           border-bottom: 1px solid white;
                                                           border-radius: unset;"
                                                           aria-label="sprache"
                                                           aria-describedby="basic-addon1">
                                                    <div style="color: white; font-size: small;">Sprache</div>
                                                </div>
                                            </div>

                                            <div class="input-group">
                                                <div class="input-group-prepend col-12 pl-0">
                                                    <span class="input-group-text pl-0"
                                                          style="background: transparent;
                                                          color: white;
                                                          font-size: larger;
                                                          border: none;">
                                                        Veranstaltungsinhalte
                                                    </span>
                                                </div>
                                                <textarea class="form-control col-12 pl-0"
                                                          th:name="'veranstaltung' + ${i} + '_inhalte'"
                                                          style="background: transparent;
                                                          border-radius: unset;
                                                          margin-bottom: 1rem;
                                                          height: 10rem;
                                                          color: white;">
                                                </textarea>
                                            </div>

                                            <div class="input-group">
                                                <div class="input-group-prepend col-12 pl-0">
                                                    <span class="input-group-text pl-0"
                                                          style="background: transparent;
                                                          color: white;
                                                          font-size: larger;
                                                          border: none;">
                                                        Lernergebnisse
                                                    </span>
                                                </div>
                                                <textarea class="form-control col-12 pl-0"
                                                          th:name="'veranstaltung' + ${i} + '_lernergebnisse'"
                                                          style="background: transparent;
                                                          border-radius: unset;
                                                          margin-bottom: 3rem;
                                                          color: white;">
                                                </textarea>
                                            </div>

                                            <div class="col-12 pl-0" style="display: inline-block;">
                                                <div class="input-group col-6 pl-0" style="float: left">
                                                    <div class="input-group-prepend col-12 pl-0">
                                                        <span class="input-group-text pl-0"
                                                              style="background: transparent;
                                                              color: white;
                                                              font-size: larger;
                                                              border: none;">
                                                            Literatur
                                                        </span>
                                                    </div>
                                                    <textarea class="form-control col-12 pl-0"
                                                              th:name="'veranstaltung' + ${i} + '_literatur'"
                                                              style="background: transparent;
                                                              border-radius: unset;
                                                              margin-bottom: 3rem;
                                                              color: white;">
                                                    </textarea>
                                                </div>

                                                <div class="input-group col-6">
                                                    <div class="input-group-prepend col-12 pl-0">
                                                        <span class="input-group-text pl-0"
                                                              style="background: transparent;
                                                              color: white;
                                                              font-size: larger;
                                                              border: none;">
                                                            Voraussetzungen für eine Teilnahme
                                                        </span>
                                                    </div>
                                                    <textarea class="form-control col-12 pl-0"
                                                              th:name="'veranstaltung' + ${i} + '_voraussetzungenTeilnahme'"
                                                              style="background: transparent;
                                                              border-radius: unset;
                                                              margin-bottom: 3rem;
                                                              color: white;">
                                                    </textarea>
                                                </div>
                                            </div>

                                            <div class="col-12 pl-0" style="display: inline-block;">
                                                <div class="input-group col-6 pl-0" style="float: left">
                                                    <div class="input-group-prepend col-12 pl-0">
                                                        <span class="input-group-text pl-0"
                                                              style="background: transparent;
                                                              color: white;
                                                              font-size: larger;
                                                              border: none;">
                                                            Verwendbarkeit
                                                        </span>
                                                    </div>
                                                    <textarea class="form-control col-12 pl-0"
                                                              th:name="'veranstaltung' + ${i} + '_verwendbarkeit'"
                                                              style="background: transparent;
                                                              border-radius: unset;
                                                              margin-bottom: 3rem;
                                                              color: white;">
                                                    </textarea>
                                                </div>

                                                <div class="input-group col-6">
                                                    <div class="input-group-prepend col-12 pl-0">
                                                        <span class="input-group-text pl-0"
                                                              style="background: transparent;
                                                              color: white;
                                                              font-size: larger;
                                                              border: none;">
                                                            Voraussetzungen zum Bestehen
                                                        </span>
                                                    </div>
                                                    <textarea class="form-control col-12 pl-0"
                                                              th:name="'veranstaltung' + ${i} + '_voraussetzungenBestehen'"
                                                              aria-label="XXYXXY"
                                                              style="background: transparent;
                                                              border-radius: unset;
                                                              margin-bottom: 3rem;
                                                              color: white;">
                                                    </textarea>
                                                </div>
                                            </div>

                                            <div>
                                                <span style="font-size: x-large; margin-bottom: 2rem">
                                                    Die Veranstaltung beinhaltet:
                                                </span>
                                                <div class="form-check mb-2" style="display: flex">
                                                    <input class="form-check-input" type="checkbox" value="true"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform1_checked'">
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform1_form'"
                                                           style=" border-bottom: 1px solid white;
                                                           max-width: 15rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="text"
                                                           value="">
                                                    <span style="font-size: larger; color: white; margin-left: 0.5rem">mit</span>
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform1_sws'"
                                                           style="max-width: 6rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="number"
                                                           value="">
                                                    <label style="font-size: larger; margin-left: 0.5rem">
                                                        SWS
                                                    </label>
                                                </div>

                                                <div class="form-check mb-2" style="display: flex">
                                                    <input class="form-check-input" type="checkbox" value="true"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform2_checked'">
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform2_form'"
                                                           style=" border-bottom: 1px solid white;
                                                           max-width: 15rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="text"
                                                           value="">
                                                    <span style="font-size: larger; color: white; margin-left: 0.5rem">mit</span>
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform2_sws'"
                                                           style="max-width: 6rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="number"
                                                           value="">
                                                    <label style="font-size: larger; margin-left: 0.5rem">
                                                        SWS
                                                    </label>
                                                </div>

                                                <div class="form-check mb-2" style="display: flex">
                                                    <input class="form-check-input" type="checkbox" value="true"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform3_checked'">
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform3_form'"
                                                           style=" border-bottom: 1px solid white;
                                                           max-width: 15rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="text"
                                                           value="">
                                                    <span style="font-size: larger; color: white; margin-left: 0.5rem">mit</span>
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform3_sws'"
                                                           style="max-width: 6rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="number"
                                                           value="">
                                                    <label style="font-size: larger; margin-left: 0.5rem">
                                                        SWS
                                                    </label>
                                                </div>

                                                <div class="form-check mb-2" style="display: flex">
                                                    <input class="form-check-input" type="checkbox" value="true"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform4_checked'">
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform4_form'"
                                                           style=" border-bottom: 1px solid white;
                                                           max-width: 15rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="text"
                                                           value="">
                                                    <span style="font-size: larger; color: white; margin-left: 0.5rem">mit</span>
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform4_sws'"
                                                           style="max-width: 6rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="number"
                                                           value="">
                                                    <label style="font-size: larger; margin-left: 0.5rem">
                                                        SWS
                                                    </label>
                                                </div>

                                                <div class="form-check mb-2" style="display: flex">
                                                    <input class="form-check-input" type="checkbox" value="true"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform5_checked'">
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform5_form'"
                                                           style=" border-bottom: 1px solid white;
                                                           max-width: 15rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="text"
                                                           value="">
                                                    <span style="font-size: larger; color: white; margin-left: 0.5rem">mit</span>
                                                    <input class="form-control ml-1"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform5_sws'"
                                                           style="max-width: 6rem;
                                                           background: transparent;
                                                           font-size: small;
                                                           color: white;"
                                                           type="number"
                                                           value="">
                                                    <label style="font-size: larger; margin-left: 0.5rem">
                                                        SWS
                                                    </label>
                                                </div>

                                                <div class="form-check mb-2" style="display: flex">
                                                    <input class="form-check-input" type="checkbox" value="true"
                                                           th:name="'veranstaltung' + ${i} + '_veranstaltungsform_texarea_checked'">
                                                    <textarea class="form-control ml-1"
                                                              th:name="'veranstaltung' + ${i} + '_veranstaltungsform_texarea_inhalt'"
                                                              style=" border-bottom: 1px solid white;
                                                              max-width: 26rem;
                                                              height: 5rem;
                                                              background: transparent;
                                                              font-size: small;
                                                              color: white;">
                                                    </textarea>
                                                </div>
                                            </div>

                                            <!-- TODO Hier ist noch überall HIDDEN; müssen im Frontend Eingabefelder hinzufügen-->
                                            <input type="hidden" th:name="'veranstaltung' + ${i} + '_zusatzfeld1_checked'"
                                                   th:value="true">
                                            <input type="hidden" th:name="'veranstaltung' + ${i} + '_zusatzfeld1_titel'"
                                                   th:value="${'veranstaltung' + i + ' zusatzfeld1 titel'}">
                                            <input type="hidden" th:name="'veranstaltung' + ${i} + '_zusatzfeld1_inhalt'"
                                                   th:value="${'veranstaltung' + i + ' zusatzfeld1 inhalt'}">
                                            <input type="hidden" th:name="'veranstaltung' + ${i} + '_zusatzfeld2_checked'"
                                                   th:value="false">
                                            <input type="hidden" th:name="'veranstaltung' + ${i} + '_zusatzfeld2_titel'"
                                                   th:value="${'veranstaltung' + i + ' zusatzfeld2 titel'}">
                                            <input type="hidden" th:name="'veranstaltung' + ${i} + '_zusatzfeld2_inhalt'"
                                                   th:value="${'veranstaltung' + i + ' zusatzfeld2 inhalt'}">


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <input type="hidden" name="veranstaltungsanzahl" th:value="${veranstaltungsanzahl}">

                    <!-- BUTTON, UM FORMULAR ABZUSCHICKEN ODER ZURÜCKZUKEHREN -->
                    <div style="border-top: 1px solid #dee2e6; padding: 1rem;">
    <!--                    TODO: SUBMIT MAPPING SCHREIBEN-->
                        <button type="submit" class="btn btn-primary mr-1" style="float: right">Modulerstellung beantragen</button>
                        <button type="button" class="btn btn-secondary mr-1" style="float: right">
                            <a href="/module/modulbeauftragter" style="color: white; text-decoration: none;">
                                Abbrechen
                            </a>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</main>
</body>
</html>